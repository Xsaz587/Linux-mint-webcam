<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Å–º–æ—Ç—Ä IP-–í–µ–±-–∫–∞–º–µ—Ä—ã —Å Honor</title>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* –°—Ç–∏–ª—å –¥–ª—è —Ä–∞–º–∫–∏ –∫–∞–º–µ—Ä—ã */
        .camera-frame {
            border: 4px solid #4f46e5;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border-radius: 1rem;
            overflow: hidden;
            background-color: #1f2937;
        }
        /* –°—Ç–∏–ª—å –¥–ª—è –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –≤–Ω—É—Ç—Ä–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π */
        .list-circle {
            list-style-type: circle;
        }

        /* --- Custom CSS for Animated Menu --- */
        /* –ë–∞–∑–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ - —Å–∫—Ä—ã—Ç–æ –∏ —Å–¥–≤–∏–Ω—É—Ç–æ –≤–ø—Ä–∞–≤–æ */
        #readmeMenu {
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out, visibility 0.3s;
            visibility: hidden;
            z-index: 50; /* –ù–∞–¥ –≤—Å–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º */
        }
        /* –ê–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ - –≤–∏–¥–∏–º–æ –∏ –≤ –∏—Å—Ö–æ–¥–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ */
        #readmeMenu.active {
            transform: translateX(0);
            visibility: visible;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen p-4 sm:p-8 font-sans flex flex-col items-center">

    <!-- 1. –ê–ù–ò–ú–ò–†–û–í–ê–ù–ù–û–ï –ú–ï–ù–Æ (README / –ò–ù–§–û–†–ú–ê–¶–ò–Ø) -->
    <div id="readmeMenu" class="fixed top-0 right-0 w-full md:w-1/2 lg:w-1/3 h-full bg-gray-950 border-l border-indigo-500 shadow-2xl overflow-y-auto p-6">
        <div class="flex justify-between items-center mb-6 border-b pb-4 border-gray-700">
            <h2 class="text-3xl font-bold text-indigo-400">üìù –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ü—Ä–æ–µ–∫—Ç–µ</h2>
            <button onclick="toggleReadmeMenu(false)" 
                    class="text-gray-400 hover:text-white transition duration-200 text-3xl font-light leading-none">
                &times;
            </button>
        </div>

        <div class="space-y-6 text-gray-300">
            <!-- 1.1 –û–±–∑–æ—Ä –ü—Ä–æ–µ–∫—Ç–∞ -->
            <div>
                <h3 class="text-xl font-semibold text-indigo-300 mb-2">–û–±–∑–æ—Ä</h3>
                <p>–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—Ä–æ—Å—Ç–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —á–∏—Å—Ç–æ–º HTML, CSS (Tailwind) –∏ JavaScript, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞ —Å Android-—Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Honor), –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–ø—É—â–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ IP-–≤–µ–±-–∫–∞–º–µ—Ä—ã. –≠—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ä–æ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –¥–æ–º–∞—à–Ω–µ–π –∫–∞–º–µ—Ä—ã –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∏–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∞.</p>
            </div>

            <!-- 1.2 –ö–ª—é—á–µ–≤—ã–µ –§—É–Ω–∫—Ü–∏–∏ (–û–±–Ω–æ–≤–ª–µ–Ω–æ) -->
            <div>
                <h3 class="text-xl font-semibold text-indigo-300 mb-2">–ö–ª—é—á–µ–≤—ã–µ –§—É–Ω–∫—Ü–∏–∏</h3>
                <ul class="list-disc list-inside space-y-1">
                    <li>**–ü—Ä–æ—Å–º–æ—Ç—Ä –í–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–∞–¥—Ä–æ–≤, –æ–±–Ω–æ–≤–ª—è–µ–º—ã—Ö —Å –≤—ã—Å–æ–∫–æ–π —á–∞—Å—Ç–æ—Ç–æ–π.</li>
                    <li>**–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –ß–∞—Å—Ç–æ—Ç–∞ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –ò–Ω—Ç–µ—Ä–≤–∞–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ **83 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã** (‚âà 12 –∫–∞–¥—Ä–æ–≤/—Å).</li>
                    <li>**–ü–æ–¥–¥–µ—Ä–∂–∫–∞ USB/ADB:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ö–æ—Å—Ç (`127.0.0.1`), —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫, —á–µ–º Wi-Fi.</li>
                </ul>
            </div>

            <!-- 1.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –ó–∞–ø—É—Å–∫ (–û–±–Ω–æ–≤–ª–µ–Ω–æ) -->
            <div>
                <h3 class="text-xl font-semibold text-indigo-300 mb-2">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –ó–∞–ø—É—Å–∫</h3>
                 <p class="text-sm text-red-400 font-semibold mb-3">
                    ‚ö† –¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Å–µ—Ç–∏ **~10 –ú–ë/—Å** –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ 12 FPS.
                </p>
                <p class="mb-2">–ò—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: <a href="https://play.google.com/store/apps/details/IP_Webcam?id=com.pas.webcam&hl=uk" target="_blank" class="text-indigo-400 hover:text-indigo-300 underline">IP Webcam (Google Play)</a></p>
                
                <h4 class="text-lg font-medium text-gray-200 mt-3">A. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ USB (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</h4>
                <ol class="list-decimal list-inside ml-4 space-y-1">
                    <li>–í–∫–ª—é—á–∏—Ç–µ —Ä–µ–∂–∏–º **USB-–æ—Ç–ª–∞–¥–∫–∏** –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ.</li>
                    <li>–ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω –∫ –ü–ö –ø–æ USB-–∫–∞–±–µ–ª—é.</li>
                    <li>–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ Linux Mint –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: 
                        <code class="bg-gray-800 text-sm p-1 rounded text-yellow-300 block my-1">adb forward tcp:8080 tcp:8080</code></li>
                    <li>–í –ø–æ–ª—è –≤–≤–æ–¥–∞ –Ω–∞ —Å–∞–π—Ç–µ —É–∫–∞–∂–∏—Ç–µ: **IP: `127.0.0.1`** –∏ **–ü–æ—Ä—Ç: `8080`**.</li>
                </ol>
                
                <h4 class="text-lg font-medium text-gray-200 mt-3">B. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ Wi-Fi</h4>
                <ol class="list-decimal list-inside ml-4 space-y-1">
                    <li>–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ IP Webcam.</li>
                    <li>–í –ø–æ–ª—è –≤–≤–æ–¥–∞ –Ω–∞ —Å–∞–π—Ç–µ —É–∫–∞–∂–∏—Ç–µ IP-–∞–¥—Ä–µ—Å –∏ –ø–æ—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∑–∞–ª–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `192.168.1.10` –∏ `8080`).</li>
                </ol>
            </div>
            
             <!-- 1.4 –ö–æ–ø–∏—Ä–∞–π—Ç -->
            <div class="pt-4 mt-6 border-t border-gray-800">
                <p class="text-center text-gray-500 text-sm">–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ: –°—Ç—É–¥–∏—è –¶–∏—Ñ—Ä–æ–≤–æ–≥–æ –ö–æ–¥–∞ (Digital Code Studio)</p>
                <p class="text-center text-gray-500 text-sm">–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã 2025¬© XSAZ</p>
            </div>
        </div>
    </div>
    <!-- –ö–û–ù–ï–¶ –ú–ï–ù–Æ -->

    <!-- –°–∫—Ä—ã—Ç—ã–π Canvas –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –∫–∞–¥—Ä–∞ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è) -->
    <canvas id="captureCanvas" style="display: none;"></canvas>

    <div class="w-full max-w-4xl space-y-8">
        <header class="text-center relative">
            <h1 class="text-4xl font-extrabold text-indigo-400">–°–µ—Ç–µ–≤–æ–π –í–∏–¥–µ–æ–ø–æ—Ç–æ–∫ —Å Honor</h1>
            <p class="text-gray-400 mt-2">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω –∫–∞–∫ IP-–∫–∞–º–µ—Ä—É. –ü—Ä–æ—Å–º–æ—Ç—Ä –≤–µ–¥–µ—Ç—Å—è –ø—Ä—è–º–æ –Ω–∞ Linux Mint.</p>
             <button onclick="toggleReadmeMenu(true)" 
                    class="absolute right-0 top-0 bg-gray-700 hover:bg-gray-600 text-gray-200 text-sm font-semibold py-2 px-4 rounded-lg transition duration-200 shadow-md hidden sm:block">
                –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è / README
            </button>
             <button onclick="toggleReadmeMenu(true)" 
                    class="sm:hidden w-full bg-gray-700 hover:bg-gray-600 text-gray-200 text-sm font-semibold py-2 px-4 rounded-lg transition duration-200 shadow-md mt-4">
                –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è / README
            </button>
        </header>

        <!-- –ë–ª–æ–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (–û—Å—Ç–∞–≤–ª–µ–Ω –Ω–∞ –º–µ—Å—Ç–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞) -->
        <div class="bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-700">
            <h2 class="text-xl font-semibold mb-3 text-indigo-300">–ö—Ä–∞—Ç–∫–∏–µ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:</h2>
            <ol class="list-decimal list-inside space-y-2 text-gray-300 ml-4">
                <li>–ó–∞–ø—É—Å—Ç–∏—Ç–µ **IP Webcam** –Ω–∞ Honor –∏ –Ω–∞–∂–º–∏—Ç–µ "Start server".</li>
                <li>**–î–ª—è USB (–ª—É—á—à–µ):** –í—ã–ø–æ–ª–Ω–∏—Ç–µ `adb forward tcp:8080 tcp:8080` –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ IP: `127.0.0.1`.</li>
                <li>**–î–ª—è Wi-Fi:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ IP-–∞–¥—Ä–µ—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑–∞–ª —Ç–µ–ª–µ—Ñ–æ–Ω.</li>
            </ol>
        </div>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–º (–û–±–Ω–æ–≤–ª–µ–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ) -->
        <div class="bg-gray-800 p-6 rounded-xl shadow-lg space-y-4">
            <!-- –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–ò—Å—Ç–æ—Ä–∏—è) -->
            <label for="connectionPreset" class="block text-sm font-medium text-gray-300">–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:</label>
            <select id="connectionPreset" onchange="loadPreset()"
                    class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:ring-indigo-500 focus:border-indigo-500 text-white">
                <option value="">-- –í—ã–±—Ä–∞—Ç—å –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –∏–ª–∏ –≤–≤–µ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é --</option>
                <!-- –û–ø—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </select>
            
            <div class="flex flex-col sm:flex-row gap-4">
                <input type="text" id="ipAddress" placeholder="IP-–∞–¥—Ä–µ—Å (Wi-Fi: 192.168.x.x –∏–ª–∏ USB: 127.0.0.1)"
                       class="flex-1 p-3 rounded-lg bg-gray-700 border border-gray-600 focus:ring-indigo-500 focus:border-indigo-500 text-white">
                <input type="number" id="port" placeholder="–ü–æ—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, 8080)" value="8080"
                       class="w-full sm:w-32 p-3 rounded-lg bg-gray-700 border border-gray-600 focus:ring-indigo-500 focus:border-indigo-500 text-white">
            </div>

            <!-- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–µ—Ç–∏ -->
            <p class="text-sm text-red-400 font-semibold mt-2 text-center">
                ‚ö† –¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Å–µ—Ç–∏ **~10 –ú–ë/—Å** –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ 12 FPS.
            </p>

            <div class="flex flex-col sm:flex-row gap-4">
                <button id="startButton" onclick="startStream()"
                        class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition duration-200 shadow-md shadow-indigo-500/50">
                    –ù–∞—á–∞—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä
                </button>
                <button id="stopButton" onclick="stopStream()" disabled
                        class="flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg transition duration-200 shadow-md shadow-red-500/50 opacity-50 cursor-not-allowed">
                    –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä
                </button>
            </div>
            <div id="status" class="text-center text-sm mt-2 text-yellow-400">
                –í–≤–µ–¥–∏—Ç–µ IP-–∞–¥—Ä–µ—Å –∏ –Ω–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä".
            </div>
        </div>

        <!-- –ü–æ–ª–µ –≤—ã–≤–æ–¥–∞ –∫–∞–º–µ—Ä—ã -->
        <div class="camera-frame w-full aspect-video">
            <img id="streamImage" alt="–í–∏–¥–µ–æ–ø–æ—Ç–æ–∫ —Å Honor"
                 class="w-full h-full object-contain"
                 src="https://placehold.co/800x450/1f2937/a5b4fc?text=–û–∂–∏–¥–∞–Ω–∏–µ+–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
                 onerror="handleImageError()">
        </div>
        
        <!-- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ—É—Ç–µ—Ä —Å –∫–æ–ø–∏—Ä–∞–π—Ç–æ–º –∏ —Å—Ç—É–¥–∏–µ–π -->
        <footer class="text-center text-gray-500 text-xs mt-6 space-y-1">
            <p>–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ Honor –±—ã–ª –∑–∞–ø—É—â–µ–Ω —Å–µ—Ä–≤–µ—Ä IP-–≤–µ–±-–∫–∞–º–µ—Ä—ã.</p>
            <p>–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ: –°—Ç—É–¥–∏—è –¶–∏—Ñ—Ä–æ–≤–æ–≥–æ –ö–æ–¥–∞ (Digital Code Studio)</p>
            <p>–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã 2025¬© XSAZ</p>
        </footer>
    </div>

    <!-- Firebase SDK Imports (–û—Å—Ç–∞–≤–ª–µ–Ω—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        
        // --- Firebase Initialization (Required for environment) ---
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        if (firebaseConfig) {
            const app = initializeApp(firebaseConfig);
            window.auth = getAuth(app);
            
            // Authentication
            async function authenticate() {
                try {
                    if (initialAuthToken) {
                        await signInWithCustomToken(window.auth, initialAuthToken);
                        console.log("Firebase signed in with custom token.");
                    } else {
                        await signInAnonymously(window.auth);
                        console.log("Firebase signed in anonymously.");
                    }
                } catch (error) {
                    console.error("Firebase Auth Error:", error);
                }
            }
            authenticate();
        }
    </script>
    
    <script>
        // --- Global State ---
        let intervalId = null;

        // --- DOM Elements ---
        const streamImage = document.getElementById('streamImage');
        const ipAddressInput = document.getElementById('ipAddress');
        const portInput = document.getElementById('port');
        const startButton = document.getElementById('startButton');
        const stopButton = document.getElementById('stopButton');
        const statusDiv = document.getElementById('status');
        const readmeMenu = document.getElementById('readmeMenu');
        const connectionPresetSelect = document.getElementById('connectionPreset'); // –ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
        const placeholderUrl = "https://placehold.co/800x450/1f2937/a5b4fc?text=–û–∂–∏–¥–∞–Ω–∏–µ+–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è";

        // --- –ò—Å—Ç–æ—Ä–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (–ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏) ---
        const CONNECTION_PRESETS = [
            { name: "USB/ADB (–õ–æ–∫–∞–ª—å–Ω—ã–π –•–æ—Å—Ç)", ip: "127.0.0.1", port: "8080" },
            { name: "Wi-Fi (–ß–∞—Å—Ç—ã–π IP #1)", ip: "192.168.1.100", port: "8080" },
            { name: "Wi-Fi (–ß–∞—Å—Ç—ã–π IP #2)", ip: "192.168.0.5", port: "8081" }
        ];

        /**
         * –ó–∞–ø–æ–ª–Ω—è–µ—Ç –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–æ–∫.
         */
        function populatePresets() {
            CONNECTION_PRESETS.forEach((preset, index) => {
                const option = document.createElement('option');
                // Value is index+1 to avoid conflict with the empty default option
                option.value = index + 1; 
                option.textContent = preset.name + ` (${preset.ip}:${preset.port})`;
                connectionPresetSelect.appendChild(option);
            });
        }

        /**
         * –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—É—é –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫—É –≤ –ø–æ–ª—è –≤–≤–æ–¥–∞.
         */
        function loadPreset() {
            const selectedIndex = connectionPresetSelect.value;
            if (selectedIndex) {
                const preset = CONNECTION_PRESETS[parseInt(selectedIndex) - 1];
                ipAddressInput.value = preset.ip;
                portInput.value = preset.port;
                statusDiv.textContent = `–ó–∞–≥—Ä—É–∂–µ–Ω–æ: ${preset.name}. –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä".`;
                statusDiv.classList.remove('text-red-400', 'text-green-400');
                statusDiv.classList.add('text-yellow-400');
            } else {
                // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –ø—É—Å—Ç–æ–π —ç–ª–µ–º–µ–Ω—Ç, –æ—á–∏—â–∞–µ–º IP, –æ—Å—Ç–∞–≤–ª—è–µ–º –ø–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                ipAddressInput.value = "";
                portInput.value = "8080";
            }
        }
        
        /**
         * –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –º–µ–Ω—é README.
         * @param {boolean} show - true, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å; false, —á—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å.
         */
        function toggleReadmeMenu(show) {
            if (show) {
                readmeMenu.classList.add('active');
            } else {
                readmeMenu.classList.remove('active');
            }
        }
        
        /**
         * –û–±–Ω–æ–≤–ª—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –ø–æ—Ç–æ–∫–∞ –∫–∞–º–µ—Ä—ã.
         */
        function updateStream() {
            const ip = ipAddressInput.value.trim();
            const port = portInput.value.trim();

            if (!ip) {
                statusDiv.textContent = "–û—à–∏–±–∫–∞: IP-–∞–¥—Ä–µ—Å –Ω–µ –≤–≤–µ–¥–µ–Ω.";
                stopStream();
                return;
            }
            
            // –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π IP Webcam –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –∫–∞–¥—Ä –ø–æ –∞–¥—Ä–µ—Å—É /shot.jpg
            const streamUrl = `http://${ip}:${port}/shot.jpg?r=${new Date().getTime()}`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º src –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            streamImage.src = streamUrl;
            statusDiv.textContent = `–ü–æ–¥–∫–ª—é—á–µ–Ω–æ: ${ip}:${port}. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ...`;
            statusDiv.classList.remove('text-red-400', 'text-yellow-400');
            statusDiv.classList.add('text-green-400');
        }

        /**
         * –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω –æ—Ç–∫–ª—é—á–∏–ª—Å—è).
         */
        function handleImageError() {
            if (intervalId) {
                // –ï—Å–ª–∏ –ø–æ—Ç–æ–∫ –±—ã–ª –∑–∞–ø—É—â–µ–Ω, –∑–Ω–∞—á–∏—Ç, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞
                statusDiv.textContent = "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ IP/–ü–æ—Ä—Ç, Wi-Fi/USB-–æ—Ç–ª–∞–¥–∫—É.";
                statusDiv.classList.remove('text-green-400', 'text-yellow-400');
                statusDiv.classList.add('text-red-400');
                // –ü—ã—Ç–∞–µ–º—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
                setTimeout(updateStream, 3000); 
            } else {
                // –ï—Å–ª–∏ –ø–æ—Ç–æ–∫ –Ω–µ –∑–∞–ø—É—â–µ–Ω, –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä
                streamImage.src = placeholderUrl;
            }
        }

        /**
         * –ó–∞–ø—É—Å–∫–∞–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞.
         */
        function startStream() {
            if (intervalId) {
                clearInterval(intervalId);
            }

            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–∞—Å—Ç–æ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 83 –º—Å ‚âà 12 –∫–∞–¥—Ä–æ–≤/—Å–µ–∫. (–û–ë–ù–û–í–õ–ï–ù–û!)
            const updateInterval = 83; 
            intervalId = setInterval(updateStream, updateInterval); 

            startButton.disabled = true;
            startButton.classList.add('opacity-50', 'cursor-not-allowed');
            stopButton.disabled = false;
            stopButton.classList.remove('opacity-50', 'cursor-not-allowed');
            ipAddressInput.disabled = true;
            portInput.disabled = true;
            connectionPresetSelect.disabled = true;
            
            // –ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞
            updateStream();
        }

        /**
         * –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞.
         */
        function stopStream() {
            if (intervalId) {
                clearInterval(intervalId);
                intervalId = null;
            }
            startButton.disabled = false;
            startButton.classList.remove('opacity-50', 'cursor-not-allowed');
            stopButton.disabled = true;
            stopButton.classList.add('opacity-50', 'cursor-not-allowed');
            ipAddressInput.disabled = false;
            portInput.disabled = false;
            connectionPresetSelect.disabled = false;

            statusDiv.textContent = "–ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.";
            statusDiv.classList.remove('text-green-400', 'text-red-400');
            statusDiv.classList.add('text-yellow-400');
            streamImage.src = placeholderUrl;
        }

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–∫–∏ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞
        streamImage.onerror = handleImageError;
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', populatePresets);

    </script>
</body>
</html>
